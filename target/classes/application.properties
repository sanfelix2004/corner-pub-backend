# ===== App =====
spring.application.name=cornerpub
server.port=8080

# ===== DB (Render) =====
spring.datasource.url=jdbc:postgresql://dpg-d2jeatndiees73c4jjl0-a.frankfurt-postgres.render.com:5432/corner_db_n0rc?sslmode=require
spring.datasource.username=corner
spring.datasource.password=8khhz9hhMsfcCh7xpUJnahImFp0UKkCs
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.hibernate.ddl-auto=update

# ===== Hikari =====
spring.datasource.hikari.maximum-pool-size=15
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=10000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.connection-timeout=10000
spring.datasource.hikari.keepalive-time=300000
spring.datasource.hikari.leak-detection-threshold=0
spring.datasource.hikari.data-source-properties.prepareThreshold=0
spring.datasource.hikari.data-source-properties.tcpKeepAlive=true
spring.datasource.hikari.data-source-properties.loginTimeout=5
spring.datasource.hikari.data-source-properties.socketTimeout=60
spring.flyway.baseline-on-migrate=true

# ===== JPA / Hibernate =====
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.open-in-view=true
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.jdbc.time_zone=UTC
spring.jpa.properties.hibernate.jdbc.batch_size=50
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# ===== Timezone / JSON =====
# NON forzare formati globali di data: lascia l'ISO default (yyyy-MM-dd)
# rimuovi queste due righe che ti rompono il parsing:
# spring.mvc.format.date=dd-MM-yyyy
# spring.jackson.date-format=dd-MM-yyyy
spring.jackson.time-zone=UTC
spring.jackson.serialization.write-dates-as-timestamps=false

# ===== Error/Actuator =====
management.endpoints.web.exposure.include=health,info
server.error.include-message=never
server.error.include-stacktrace=never
server.error.include-binding-errors=always

# ===== Upload =====
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

spring.mail.host=smtp.sendgrid.net
spring.mail.port=587
spring.mail.username=apikey
spring.mail.password=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
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
mail.from.noreply=nicky64bari@hotmail.it
mail.to.admin=cornersnc@gmail.com
mail.enabled=true
mail.rate-ms=1500
# ===== Cloudinary (usa ENV su Render!) =====
# Imposta queste come Environment Variables su Render e togli dal file:
# CLOUDINARY_CLOUD_NAME, CLOUDINARY_API_KEY, CLOUDINARY_API_SECRET
cloudinary.cloud-name=dytvizqtq
cloudinary.api-key=877769766761344
cloudinary.api-secret=EUMdmg34A4nvxQrjln4bgzF3D6Q
cloudinary.ttlDays=2

# ===== Logging (solo console in PaaS) =====
logging.level.root=INFO
logging.level.com.cornerpub=INFO
logging.level.org.springframework.security=WARN
logging.level.org.springframework.web=WARN
logging.level.org.hibernate.SQL=INFO
logging.level.com.zaxxer.hikari=INFO
# logging.file.name=logs/app.log           # ? su Render evita file
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %level [%thread] %logger{36} - %msg%n
